{#-
  Template file for the header.
-#}

{%- set hamburger -%}
<button
    data-action="sidebar#open"
    data-sidebar-target="hamburger"
    class="xl:hidden h-14 w-14 sm:h-18 sm:w-18 leading-14 sm:leading-18 text-gray-100 hover:bg-gray-700 hover:text-brand focus:outline-none focus:bg-gray-700 focus:text-brand">
  <svg aria-hidden="true" class="fill-current h-8 w-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</button>
{%- endset -%}

{%- macro home_link(logo=false) -%}
<a class="hover:bg-gray-700 focus:bg-gray-700 focus:outline-none tooltipped tooltipped-sw"
   href="{{ pathto(master_doc) }}"
   aria-label="{{ _('Back to homepage') }}">
  {%- if logo -%}
    <img class="h-14 w-14 sm:h-18 sm:w-18 p-3 sm:p-5 inline-block" src="{{ pathto('_static/' + logo, 1) }}" alt="Logo" />
  {%- endif -%}
  <span class="hidden lg:inline-block flex-shrink-0 font-medium text-gray-100 mx-5 leading-14 sm:leading-18 tracking-wider">{{ docstitle }}</span>
</a>
{%- endmacro -%}

{%- macro extra_link(text, url) -%}
  {%- set active = "bg-gray-700 border-b-4 border-brand" if pagename in url else "bg-transparent" -%}
  <a href="{{ pathto(url) }}" class="h-14 sm:h-18 inline-block leading-14 sm:leading-18 text-gray-100 {{ active }} tracking-wide font-medium hover:text-brand focus:bg-gray-700 focus:outline-none hover:no-underline focus:text-brand px-4">{{ text }}</a>
{%- endmacro -%}


<div class="bg-gray-dark shadow-md flex items-center h-full xl:px-2 relative">
  {#- show logo on the left side of the header -#}
  <div class="flex items-center">
    {%- if theme_show_nav|tobool %}
      {{ hamburger }}
    {%- endif %}
    {%- block logo -%}
      {{ home_link(logo) }}
    {%- endblock -%}
  </div>

  {#- show a search input field on the right side -#}
  <div class="flex justify-end items-center flex-1">
    <form
      id="searchbox"
      action="{{ pathto('search') }}"
      data-action="click->search#focusSearchInput"
      method="get"
      class="flex print:hidden justify-between items-center leading-14 sm:leading-18 md:ml-4 bg-gray-dark text-gray-300 focus-within:bg-gray-50 focus-within:text-gray-800 focus-within:absolute focus-within:inset-x-0 focus-within:top-0 md:focus-within:w-full md:focus-within:static">

      <button
        class="text-inherit h-14 w-14 sm:h-18 sm:w-18"
        aria-label="{{ _('Get search results') }}"
        tabindex="-1"
      >
          <svg aria-hidden="true" class="fill-current stroke-current h-8 w-8" stroke-width="0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
      </button>

      <input
        name="q"
        id="search-input"
        data-search-target="searchInput"
        type="search"
        aria-label="Search the docs"
        placeholder="{{ _('Search the docs') }}"
        class="pr-2 bg-transparent text-inherit focus:outline-none w-0 md:w-auto focus:w-full transition-all duration-100"
      />
    </form>

    {%- if theme_extra_header_links|tobool -%}
      {%- block extra_header_links -%}
      <div class="flex-shrink-0">
        {%- for text, url in theme_extra_header_links.items() -%}
          {{ extra_link(text, url) }}
        {%- endfor -%}
      </div>
      {%- endblock -%}
    {%- endif -%}
  </div>
</div>
